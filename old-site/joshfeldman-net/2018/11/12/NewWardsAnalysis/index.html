<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Analysis for New Wards, New Problems</title>
  <meta name="description" content="Below is the analysis for “New Wards, New Problems”.">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="joshfeldman.net/2018/11/12/NewWardsAnalysis/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Josh Feldman Blog" href="joshfeldman.net/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="JoshFeldman14">
  <meta name="twitter:title" content="Analysis for New Wards, New Problems">
  <meta name="twitter:description" content="Below is the analysis for “New Wards, New Problems”.">
  
    <meta name="twitter:creator" content="JoshFeldman14">
  
  

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet">

  

</head>


  <body>

    
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



<header class="site-header" role="banner">
  <div class="wrapper">
    
    
    <a class="site-title" rel="author" href="/">Josh Feldman Blog</a>

    
      <nav class="site-nav">
        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/about/">About Me</a>
            
          
            
            
            <a class="page-link" href="/archives/">Blog Archive</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/categories/politics/">politics</a>
            
          
            
            
            <a class="page-link" href="/categories/ml/">ml</a>
            
          
            
            
            <a class="page-link" href="/categories/law/">law</a>
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Analysis for New Wards, New Problems</h1>
    
    <p class="post-meta"><time datetime="2018-11-12T00:00:00+00:00" itemprop="datePublished">Nov 12, 2018</time> •
  
    
    
      
        <a href="/categories/politics/">politics</a>
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Below is the analysis for “New Wards, New Problems”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">statsmodels.regression.linear_model</span> <span class="k">as</span> <span class="n">sm</span>
</code></pre></div></div>

<h1 id="how-torontos-new-wards-change-voter-representation">How Toronto’s New Wards Change Voter Representation</h1>

<p>This analysis will look at the census profile data for each ward</p>

<p><strong>Factors to Analyze:</strong></p>
<ul>
  <li>Overall increase in ward size</li>
  <li>Income</li>
  <li>Language</li>
  <li>First-gen immigrants</li>
  <li>Race</li>
  <li>Education</li>
  <li>Employment</li>
  <li>Rent vs. Home owners</li>
</ul>

<h1 id="overall-increase-in-size-of-ward">Overall Increase in Size of Ward</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">full_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/FullPop/full_47.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">full_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/FullPop/full_25.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">full_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2731570</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>60735</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">full_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2731570</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>118040</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>118020</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>129080</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>108805</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toronto_pop</span> <span class="o">=</span> <span class="n">full_after</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'Toronto'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'The population of Toronto is '</span><span class="p">,</span> <span class="n">toronto_pop</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The population of Toronto is  2731570
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">avg_ward_before</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">full_before</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>
<span class="n">avg_ward_after</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">full_after</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>
<span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="s">'before'</span><span class="p">,</span> <span class="s">'after'</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="p">[</span><span class="n">avg_ward_before</span><span class="p">,</span> <span class="n">avg_ward_after</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Average Ward Size'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'The average ward increased by {} people</span><span class="se">\n</span><span class="s">which is a factor of {}'</span>
          <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">avg_ward_after</span> <span class="o">-</span> <span class="n">avg_ward_before</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">avg_ward_after</span><span class="o">/</span><span class="n">avg_ward_before</span><span class="p">,</span><span class="mi">3</span><span class="p">)))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/img/AverageWardIncrease.png" alt="png" /></p>

<h1 id="function-to-calculate-average-increase-in-group-vs-out-group">Function to calculate average increase (in group vs. out group)</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">scale_populations</span><span class="p">(</span><span class="n">df_before</span><span class="p">,</span> <span class="n">df_after</span><span class="p">,</span> <span class="n">full_before</span> <span class="o">=</span> <span class="n">full_before</span><span class="p">,</span> <span class="n">full_after</span> <span class="o">=</span> <span class="n">full_after</span><span class="p">):</span>
    <span class="c1">#scale popualtion
</span>    <span class="n">scale_factors_before</span> <span class="o">=</span> <span class="n">full_before</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span><span class="o">/</span><span class="n">df_before</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span>
    <span class="n">df_before_scaled</span> <span class="o">=</span> <span class="n">df_before</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="n">scale_factors_before</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">scale_factors_after</span> <span class="o">=</span> <span class="n">full_after</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span><span class="o">/</span><span class="n">df_after</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">total</span>
    <span class="n">df_after_scaled</span> <span class="o">=</span> <span class="n">df_after</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="n">scale_factors_after</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_before_scaled</span><span class="p">,</span> <span class="n">df_after_scaled</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">):</span>
    <span class="c1"># get protected group ward size increase
</span>    <span class="n">avg_ward_size_protected_before</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">protected_before</span><span class="p">)</span>
    <span class="n">avg_ward_size_protected_after</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">total_after</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">protected_after</span><span class="p">)</span>
    <span class="n">avg_increase_protected</span> <span class="o">=</span> <span class="n">avg_ward_size_protected_after</span> <span class="o">-</span> <span class="n">avg_ward_size_protected_before</span>

    <span class="c1"># get majority group ward size increase
</span>    <span class="n">avg_ward_size_majority_before</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">majority_before</span><span class="p">)</span>
    <span class="n">avg_ward_size_majority_after</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">total_after</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">majority_after</span><span class="p">)</span>
    <span class="n">avg_increase_majority</span> <span class="o">=</span> <span class="n">avg_ward_size_majority_after</span> <span class="o">-</span> <span class="n">avg_ward_size_majority_before</span>

    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">avg_increase_protected</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">avg_increase_majority</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="income">Income</h1>
<p>The low income threshold is provided by the census data and needs to be defined.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">income_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Income/Income_47.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">income_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Income/Income_25.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">income_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>low_income</th>
      <th>prop_low_income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665.0</td>
      <td>543365.0</td>
      <td>20.2</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>60040.0</td>
      <td>13875.0</td>
      <td>23.1</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>56300.0</td>
      <td>11345.0</td>
      <td>20.2</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>63165.0</td>
      <td>7575.0</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>65335.0</td>
      <td>7850.0</td>
      <td>12.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">income_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>low_income</th>
      <th>prop_low_income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665.0</td>
      <td>543365.0</td>
      <td>20.2</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>116955.0</td>
      <td>26300.0</td>
      <td>22.5</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>116055.0</td>
      <td>13525.0</td>
      <td>11.7</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>127525.0</td>
      <td>19640.0</td>
      <td>15.4</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>106445.0</td>
      <td>18535.0</td>
      <td>17.4</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">income_before</span><span class="p">,</span> <span class="n">income_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">income_before</span><span class="p">,</span> <span class="n">income_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">income_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>low_income</th>
      <th>prop_low_income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>14035.611676</td>
      <td>23.367397</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>11528.373890</td>
      <td>20.526501</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>7682.931608</td>
      <td>12.170981</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>7937.108747</td>
      <td>12.133160</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>7285.027545</td>
      <td>14.852969</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># calculated high income
</span><span class="n">income_before</span><span class="p">[</span><span class="s">'high_income'</span><span class="p">]</span> <span class="o">=</span> <span class="n">income_before</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="n">income_before</span><span class="o">.</span><span class="n">low_income</span>
<span class="n">income_after</span><span class="p">[</span><span class="s">'high_income'</span><span class="p">]</span> <span class="o">=</span> <span class="n">income_after</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="n">income_after</span><span class="o">.</span><span class="n">low_income</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">total_before</span> <span class="o">=</span> <span class="n">income_before</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_before</span> <span class="o">=</span> <span class="n">income_before</span><span class="o">.</span><span class="n">low_income</span>
<span class="n">majority_before</span> <span class="o">=</span> <span class="n">income_before</span><span class="o">.</span><span class="n">high_income</span>

<span class="n">total_after</span> <span class="o">=</span> <span class="n">income_after</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_after</span> <span class="o">=</span> <span class="n">income_after</span><span class="o">.</span><span class="n">low_income</span>
<span class="n">majority_after</span> <span class="o">=</span> <span class="n">income_after</span><span class="o">.</span><span class="n">high_income</span>

<span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"If you are low-income, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"If you are high-income, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">majority_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"This is a disparity of {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="o">-</span><span class="n">majority_increase</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If you are low-income, your ward size increased by 50281 people on average
If you are high-income, your ward size increased by 49989 people on average
This is a disparity of 292 people on average
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">threshold</span> <span class="o">=</span> <span class="mf">.5</span>

<span class="c1"># lost majorities
</span><span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span> <span class="o">/</span> <span class="n">total_before</span>
<span class="k">print</span><span class="p">(</span><span class="s">"wards with majority low-income before: {}/47"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])))</span>

<span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span> <span class="o">/</span> <span class="n">total_after</span>
<span class="k">print</span><span class="p">(</span><span class="s">"wards with majority low-income before: {}/25"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wards with majority low-income before: 0/47
wards with majority low-income before: 0/25
</code></pre></div></div>

<h1 id="visible-minority">Visible Minority</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Race/race_before.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">race_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Race/race_after.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>visible_minority</th>
      <th>south_asian</th>
      <th>chinese</th>
      <th>black</th>
      <th>filipino</th>
      <th>latin_american</th>
      <th>arab</th>
      <th>southeast_asian</th>
      <th>west_asian</th>
      <th>korean</th>
      <th>japanese</th>
      <th>other_visible_minoirty</th>
      <th>multiple_visible_minorities</th>
      <th>not_visible_minority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>1385850</td>
      <td>338960</td>
      <td>299465</td>
      <td>239855</td>
      <td>152715</td>
      <td>77165</td>
      <td>36030</td>
      <td>41650</td>
      <td>60320</td>
      <td>41640</td>
      <td>13410</td>
      <td>36975</td>
      <td>47670</td>
      <td>1305815</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>60045</td>
      <td>49875</td>
      <td>20615</td>
      <td>700</td>
      <td>13935</td>
      <td>2190</td>
      <td>2410</td>
      <td>3120</td>
      <td>1065</td>
      <td>1715</td>
      <td>140</td>
      <td>40</td>
      <td>2715</td>
      <td>1235</td>
      <td>10165</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>56295</td>
      <td>35405</td>
      <td>12210</td>
      <td>805</td>
      <td>11990</td>
      <td>2050</td>
      <td>3045</td>
      <td>525</td>
      <td>925</td>
      <td>1015</td>
      <td>325</td>
      <td>100</td>
      <td>1300</td>
      <td>1115</td>
      <td>20895</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>63170</td>
      <td>18215</td>
      <td>4020</td>
      <td>2450</td>
      <td>3320</td>
      <td>1975</td>
      <td>1630</td>
      <td>675</td>
      <td>540</td>
      <td>840</td>
      <td>1380</td>
      <td>275</td>
      <td>380</td>
      <td>735</td>
      <td>44955</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>65330</td>
      <td>18755</td>
      <td>4315</td>
      <td>1620</td>
      <td>5135</td>
      <td>1375</td>
      <td>2495</td>
      <td>385</td>
      <td>305</td>
      <td>590</td>
      <td>1055</td>
      <td>285</td>
      <td>555</td>
      <td>650</td>
      <td>46575</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>visible_minority</th>
      <th>south_asian</th>
      <th>chinese</th>
      <th>black</th>
      <th>filipino</th>
      <th>latin_american</th>
      <th>arab</th>
      <th>southeast_asian</th>
      <th>west_asian</th>
      <th>korean</th>
      <th>japanese</th>
      <th>other_visible_minoirty</th>
      <th>multiple_visible_minorities</th>
      <th>not_visible_minority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>1385855</td>
      <td>338965</td>
      <td>299465</td>
      <td>239850</td>
      <td>152715</td>
      <td>77165</td>
      <td>36030</td>
      <td>41645</td>
      <td>60325</td>
      <td>41640</td>
      <td>13415</td>
      <td>36975</td>
      <td>47670</td>
      <td>1305815</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>116955</td>
      <td>88495</td>
      <td>33825</td>
      <td>1635</td>
      <td>27365</td>
      <td>4460</td>
      <td>5605</td>
      <td>3705</td>
      <td>2015</td>
      <td>2790</td>
      <td>480</td>
      <td>145</td>
      <td>4115</td>
      <td>2355</td>
      <td>28460</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>116055</td>
      <td>31445</td>
      <td>6910</td>
      <td>3530</td>
      <td>6825</td>
      <td>2835</td>
      <td>3725</td>
      <td>885</td>
      <td>715</td>
      <td>1315</td>
      <td>2165</td>
      <td>500</td>
      <td>805</td>
      <td>1235</td>
      <td>84615</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>127525</td>
      <td>35355</td>
      <td>7050</td>
      <td>4445</td>
      <td>6325</td>
      <td>4255</td>
      <td>3060</td>
      <td>1155</td>
      <td>1315</td>
      <td>915</td>
      <td>2425</td>
      <td>655</td>
      <td>2185</td>
      <td>1575</td>
      <td>92165</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>106445</td>
      <td>27865</td>
      <td>5010</td>
      <td>3710</td>
      <td>5625</td>
      <td>2805</td>
      <td>2320</td>
      <td>700</td>
      <td>1595</td>
      <td>585</td>
      <td>1015</td>
      <td>730</td>
      <td>2255</td>
      <td>1515</td>
      <td>78580</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span><span class="p">,</span> <span class="n">race_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">race_before</span><span class="p">,</span> <span class="n">race_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>visible_minority</th>
      <th>south_asian</th>
      <th>chinese</th>
      <th>black</th>
      <th>filipino</th>
      <th>latin_american</th>
      <th>arab</th>
      <th>southeast_asian</th>
      <th>west_asian</th>
      <th>korean</th>
      <th>japanese</th>
      <th>other_visible_minoirty</th>
      <th>multiple_visible_minorities</th>
      <th>not_visible_minority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>50448.132651</td>
      <td>20851.894829</td>
      <td>708.043967</td>
      <td>14095.132401</td>
      <td>2215.166125</td>
      <td>2437.694229</td>
      <td>3155.853110</td>
      <td>1077.238321</td>
      <td>1734.707719</td>
      <td>141.608793</td>
      <td>40.459655</td>
      <td>2746.199101</td>
      <td>1249.191856</td>
      <td>10281.809893</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>35980.460965</td>
      <td>12408.457234</td>
      <td>818.084199</td>
      <td>12184.881428</td>
      <td>2083.320011</td>
      <td>3094.492406</td>
      <td>533.533173</td>
      <td>940.034639</td>
      <td>1031.497469</td>
      <td>330.282441</td>
      <td>101.625366</td>
      <td>1321.129763</td>
      <td>1133.122835</td>
      <td>21234.620304</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>18473.072265</td>
      <td>4076.955833</td>
      <td>2484.711889</td>
      <td>3367.038151</td>
      <td>2002.982033</td>
      <td>1653.094032</td>
      <td>684.563479</td>
      <td>547.650784</td>
      <td>851.901219</td>
      <td>1399.552003</td>
      <td>278.896232</td>
      <td>385.383885</td>
      <td>745.413567</td>
      <td>45591.927735</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>18964.569111</td>
      <td>4363.215980</td>
      <td>1638.101944</td>
      <td>5192.378693</td>
      <td>1390.364304</td>
      <td>2522.879229</td>
      <td>389.302005</td>
      <td>308.408082</td>
      <td>596.592683</td>
      <td>1066.788612</td>
      <td>288.184601</td>
      <td>561.201592</td>
      <td>657.263126</td>
      <td>47095.430889</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>14398.286064</td>
      <td>3324.235870</td>
      <td>1606.545603</td>
      <td>2404.766374</td>
      <td>1404.464395</td>
      <td>1111.446644</td>
      <td>464.786778</td>
      <td>535.515201</td>
      <td>399.110386</td>
      <td>1530.765150</td>
      <td>267.757600</td>
      <td>823.480922</td>
      <td>535.515201</td>
      <td>35121.713936</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span><span class="o">.</span><span class="n">columns</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['total', 'visible_minority', 'south_asian', 'chinese', 'black',
       'filipino', 'latin_american', 'arab', 'southeast_asian', 'west_asian',
       'korean', 'japanese', 'other_visible_minoirty',
       'multiple_visible_minorities', 'not_visible_minority'],
      dtype='object')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">protected</span> <span class="o">=</span> <span class="p">[</span><span class="s">'visible_minority'</span><span class="p">,</span>
             <span class="s">'south_asian'</span><span class="p">,</span>
             <span class="s">'chinese'</span><span class="p">,</span>
             <span class="s">'black'</span><span class="p">,</span>
             <span class="s">'filipino'</span><span class="p">,</span>
             <span class="s">'latin_american'</span><span class="p">,</span>
             <span class="s">'arab'</span><span class="p">,</span>
             <span class="s">'southeast_asian'</span><span class="p">,</span>
             <span class="s">'west_asian'</span><span class="p">,</span>
             <span class="s">'korean'</span><span class="p">,</span>
             <span class="s">'japanese'</span><span class="p">,</span>
             <span class="s">'other_visible_minoirty'</span><span class="p">,</span>
             <span class="s">'multiple_visible_minorities'</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">protected</span><span class="p">:</span>
    <span class="n">total_before</span> <span class="o">=</span> <span class="n">race_before</span><span class="o">.</span><span class="n">total</span>
    <span class="n">protected_before</span> <span class="o">=</span> <span class="n">race_before</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
    <span class="n">majority_before</span> <span class="o">=</span> <span class="n">race_before</span><span class="o">.</span><span class="n">not_visible_minority</span>

    <span class="n">total_after</span> <span class="o">=</span> <span class="n">race_after</span><span class="o">.</span><span class="n">total</span>
    <span class="n">protected_after</span> <span class="o">=</span> <span class="n">race_after</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
    <span class="n">majority_after</span> <span class="o">=</span> <span class="n">race_after</span><span class="o">.</span><span class="n">not_visible_minority</span>

    <span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span>
                                                          <span class="n">protected_before</span><span class="p">,</span>
                                                          <span class="n">majority_before</span><span class="p">,</span>
                                                          <span class="n">total_after</span><span class="p">,</span>
                                                          <span class="n">protected_after</span><span class="p">,</span>
                                                          <span class="n">majority_after</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">col</span><span class="p">,</span> <span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_results</span> <span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'group'</span><span class="p">,</span> <span class="s">'protected_increase'</span><span class="p">,</span> <span class="s">'majority_increase'</span><span class="p">])</span>
<span class="n">race_results</span><span class="p">[</span><span class="s">'disparity'</span><span class="p">]</span> <span class="o">=</span> <span class="n">race_results</span><span class="o">.</span><span class="n">protected_increase</span> <span class="o">-</span> <span class="n">race_results</span><span class="o">.</span><span class="n">majority_increase</span>
<span class="n">race_results</span><span class="p">[[</span><span class="s">'protected_increase'</span><span class="p">,</span><span class="s">'group'</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s">'group'</span><span class="p">,</span> <span class="n">kind</span> <span class="o">=</span> <span class="s">'bar'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'average ward size increase'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="mi">51144</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">"white increase"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">45000</span><span class="p">,</span><span class="mi">57000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Some groups (S. asians, chinese, filipino) have more representation </span><span class="se">\n</span><span class="s"> while others (L. american, Korean, SE. Asian) have less"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/img/WardIncreasByEthnicity.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">protected</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"---------------------------"</span><span class="p">)</span>
    <span class="n">total_before</span> <span class="o">=</span> <span class="n">race_before</span><span class="o">.</span><span class="n">total</span>
    <span class="n">protected_before</span> <span class="o">=</span> <span class="n">race_before</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
    <span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span><span class="o">/</span><span class="n">total_before</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"wards with majority {} before: {}/47={}"</span>
          <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">col</span><span class="p">,</span>
                  <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
                  <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">47</span>
                 <span class="p">)</span>
         <span class="p">)</span>

    <span class="n">total_after</span> <span class="o">=</span> <span class="n">race_after</span><span class="o">.</span><span class="n">total</span>
    <span class="n">protected_after</span> <span class="o">=</span> <span class="n">race_after</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
    <span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span><span class="o">/</span><span class="n">total_after</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"wards with majority {} after: {}/47={}"</span>
          <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">col</span><span class="p">,</span>
                  <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
                  <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">25</span>
                 <span class="p">)</span>
         <span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---------------------------
wards with majority visible_minority before: 24/47=0.5106382978723404
wards with majority visible_minority after: 12/47=0.48
---------------------------
wards with majority south_asian before: 0/47=0.0
wards with majority south_asian after: 0/47=0.0
---------------------------
wards with majority chinese before: 1/47=0.02127659574468085
wards with majority chinese after: 0/47=0.0
---------------------------
wards with majority black before: 0/47=0.0
wards with majority black after: 0/47=0.0
---------------------------
wards with majority filipino before: 0/47=0.0
wards with majority filipino after: 0/47=0.0
---------------------------
wards with majority latin_american before: 0/47=0.0
wards with majority latin_american after: 0/47=0.0
---------------------------
wards with majority arab before: 0/47=0.0
wards with majority arab after: 0/47=0.0
---------------------------
wards with majority southeast_asian before: 0/47=0.0
wards with majority southeast_asian after: 0/47=0.0
---------------------------
wards with majority west_asian before: 0/47=0.0
wards with majority west_asian after: 0/47=0.0
---------------------------
wards with majority korean before: 0/47=0.0
wards with majority korean after: 0/47=0.0
---------------------------
wards with majority japanese before: 0/47=0.0
wards with majority japanese after: 0/47=0.0
---------------------------
wards with majority other_visible_minoirty before: 0/47=0.0
wards with majority other_visible_minoirty after: 0/47=0.0
---------------------------
wards with majority multiple_visible_minorities before: 0/47=0.0
wards with majority multiple_visible_minorities after: 0/47=0.0
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_before</span><span class="o">.</span><span class="n">columns</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['total', 'visible_minority', 'south_asian', 'chinese', 'black',
       'filipino', 'latin_american', 'arab', 'southeast_asian', 'west_asian',
       'korean', 'japanese', 'other_visible_minoirty',
       'multiple_visible_minorities', 'not_visible_minority'],
      dtype='object')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="s">'total'</span><span class="p">,</span> <span class="s">'visible_minority'</span><span class="p">,</span> <span class="s">'south_asian'</span><span class="p">,</span> <span class="s">'chinese'</span><span class="p">,</span> <span class="s">'black'</span><span class="p">,</span>
       <span class="s">'filipino'</span><span class="p">,</span> <span class="s">'latin_american'</span><span class="p">,</span> <span class="s">'arab'</span><span class="p">,</span> <span class="s">'southeast_asian'</span><span class="p">,</span> <span class="s">'west_asian'</span><span class="p">,</span>
       <span class="s">'korean'</span><span class="p">,</span> <span class="s">'japanese'</span><span class="p">,</span> <span class="s">'other_visible_minoirty'</span><span class="p">,</span>
       <span class="s">'multiple_visible_minorities'</span><span class="p">,</span> <span class="s">'not_visible_minority'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">ward</span> <span class="ow">in</span> <span class="n">race_before</span><span class="o">.</span><span class="n">itterrows</span><span class="p">():</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">race_before</span><span class="p">:</span>

</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>visible_minority</th>
      <th>south_asian</th>
      <th>chinese</th>
      <th>black</th>
      <th>filipino</th>
      <th>latin_american</th>
      <th>arab</th>
      <th>southeast_asian</th>
      <th>west_asian</th>
      <th>korean</th>
      <th>japanese</th>
      <th>other_visible_minoirty</th>
      <th>multiple_visible_minorities</th>
      <th>not_visible_minority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>50448.132651</td>
      <td>20851.894829</td>
      <td>708.043967</td>
      <td>14095.132401</td>
      <td>2215.166125</td>
      <td>2437.694229</td>
      <td>3155.853110</td>
      <td>1077.238321</td>
      <td>1734.707719</td>
      <td>141.608793</td>
      <td>40.459655</td>
      <td>2746.199101</td>
      <td>1249.191856</td>
      <td>10281.809893</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>35980.460965</td>
      <td>12408.457234</td>
      <td>818.084199</td>
      <td>12184.881428</td>
      <td>2083.320011</td>
      <td>3094.492406</td>
      <td>533.533173</td>
      <td>940.034639</td>
      <td>1031.497469</td>
      <td>330.282441</td>
      <td>101.625366</td>
      <td>1321.129763</td>
      <td>1133.122835</td>
      <td>21234.620304</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>18473.072265</td>
      <td>4076.955833</td>
      <td>2484.711889</td>
      <td>3367.038151</td>
      <td>2002.982033</td>
      <td>1653.094032</td>
      <td>684.563479</td>
      <td>547.650784</td>
      <td>851.901219</td>
      <td>1399.552003</td>
      <td>278.896232</td>
      <td>385.383885</td>
      <td>745.413567</td>
      <td>45591.927735</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>18964.569111</td>
      <td>4363.215980</td>
      <td>1638.101944</td>
      <td>5192.378693</td>
      <td>1390.364304</td>
      <td>2522.879229</td>
      <td>389.302005</td>
      <td>308.408082</td>
      <td>596.592683</td>
      <td>1066.788612</td>
      <td>288.184601</td>
      <td>561.201592</td>
      <td>657.263126</td>
      <td>47095.430889</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>14398.286064</td>
      <td>3324.235870</td>
      <td>1606.545603</td>
      <td>2404.766374</td>
      <td>1404.464395</td>
      <td>1111.446644</td>
      <td>464.786778</td>
      <td>535.515201</td>
      <td>399.110386</td>
      <td>1530.765150</td>
      <td>267.757600</td>
      <td>823.480922</td>
      <td>535.515201</td>
      <td>35121.713936</td>
    </tr>
    <tr>
      <th>Ward 6</th>
      <td>67560.0</td>
      <td>19040.188934</td>
      <td>3373.441296</td>
      <td>2476.896086</td>
      <td>3809.050832</td>
      <td>2593.396311</td>
      <td>1732.307692</td>
      <td>597.696806</td>
      <td>704.066577</td>
      <td>476.131354</td>
      <td>658.479532</td>
      <td>339.370220</td>
      <td>1362.546109</td>
      <td>916.806118</td>
      <td>48514.745839</td>
    </tr>
    <tr>
      <th>Ward 7</th>
      <td>47345.0</td>
      <td>33097.383524</td>
      <td>8161.548073</td>
      <td>1072.832486</td>
      <td>9033.851122</td>
      <td>2717.173867</td>
      <td>5293.977128</td>
      <td>426.125053</td>
      <td>3298.709233</td>
      <td>681.800085</td>
      <td>210.555909</td>
      <td>60.158831</td>
      <td>1067.819250</td>
      <td>1057.792778</td>
      <td>14252.629712</td>
    </tr>
    <tr>
      <th>Ward 8</th>
      <td>54200.0</td>
      <td>42771.502687</td>
      <td>6989.660923</td>
      <td>2465.462294</td>
      <td>14426.218269</td>
      <td>2862.145636</td>
      <td>4192.792292</td>
      <td>974.133778</td>
      <td>5568.630721</td>
      <td>1129.794330</td>
      <td>241.022790</td>
      <td>55.234389</td>
      <td>2088.864184</td>
      <td>1777.543079</td>
      <td>11428.497313</td>
    </tr>
    <tr>
      <th>Ward 9</th>
      <td>47470.0</td>
      <td>27812.377785</td>
      <td>2125.148348</td>
      <td>1373.326998</td>
      <td>7057.096400</td>
      <td>5653.696547</td>
      <td>4766.547355</td>
      <td>551.335656</td>
      <td>3242.856087</td>
      <td>786.906346</td>
      <td>250.607116</td>
      <td>50.121423</td>
      <td>746.809207</td>
      <td>1222.962728</td>
      <td>19652.610073</td>
    </tr>
    <tr>
      <th>Ward 10</th>
      <td>68535.0</td>
      <td>26801.171410</td>
      <td>1809.255460</td>
      <td>2141.876241</td>
      <td>2444.258769</td>
      <td>13073.004633</td>
      <td>1436.317009</td>
      <td>594.685639</td>
      <td>539.248842</td>
      <td>1647.984778</td>
      <td>1547.190602</td>
      <td>186.469226</td>
      <td>428.375248</td>
      <td>952.504964</td>
      <td>41733.828590</td>
    </tr>
    <tr>
      <th>Ward 11</th>
      <td>62615.0</td>
      <td>34228.722586</td>
      <td>2847.748644</td>
      <td>1540.419196</td>
      <td>14856.937768</td>
      <td>2883.218823</td>
      <td>5538.415068</td>
      <td>364.836125</td>
      <td>2994.696528</td>
      <td>349.634620</td>
      <td>324.298778</td>
      <td>228.022578</td>
      <td>1109.709881</td>
      <td>1200.918912</td>
      <td>28381.210245</td>
    </tr>
    <tr>
      <th>Ward 12</th>
      <td>53055.0</td>
      <td>29439.518487</td>
      <td>3725.558899</td>
      <td>942.794497</td>
      <td>12038.370593</td>
      <td>3923.241617</td>
      <td>4298.331900</td>
      <td>233.164230</td>
      <td>2088.340499</td>
      <td>258.508169</td>
      <td>131.788478</td>
      <td>70.963027</td>
      <td>669.079966</td>
      <td>1064.445400</td>
      <td>23615.481513</td>
    </tr>
    <tr>
      <th>Ward 13</th>
      <td>56895.0</td>
      <td>23619.889991</td>
      <td>1775.082958</td>
      <td>1646.825518</td>
      <td>5284.206492</td>
      <td>8839.502705</td>
      <td>2385.588368</td>
      <td>220.602795</td>
      <td>943.974752</td>
      <td>405.293508</td>
      <td>410.423805</td>
      <td>169.299820</td>
      <td>615.635708</td>
      <td>918.323264</td>
      <td>33275.110009</td>
    </tr>
    <tr>
      <th>Ward 14</th>
      <td>57500.0</td>
      <td>12905.611135</td>
      <td>1275.554589</td>
      <td>3161.374511</td>
      <td>1060.461070</td>
      <td>3426.489778</td>
      <td>955.415398</td>
      <td>250.108743</td>
      <td>245.106568</td>
      <td>820.356677</td>
      <td>655.284906</td>
      <td>290.126142</td>
      <td>140.060896</td>
      <td>620.269682</td>
      <td>44594.388865</td>
    </tr>
    <tr>
      <th>Ward 15</th>
      <td>63520.0</td>
      <td>17250.069344</td>
      <td>1592.865667</td>
      <td>2627.460087</td>
      <td>3877.168199</td>
      <td>3247.192388</td>
      <td>2386.737623</td>
      <td>379.009837</td>
      <td>568.514756</td>
      <td>343.157555</td>
      <td>548.027737</td>
      <td>384.131592</td>
      <td>353.401064</td>
      <td>947.524593</td>
      <td>46264.808902</td>
    </tr>
    <tr>
      <th>Ward 16</th>
      <td>67990.0</td>
      <td>24898.952085</td>
      <td>3081.528549</td>
      <td>3041.247130</td>
      <td>5775.348441</td>
      <td>3026.141598</td>
      <td>4481.307858</td>
      <td>302.110642</td>
      <td>1857.980449</td>
      <td>287.005110</td>
      <td>483.377027</td>
      <td>261.829223</td>
      <td>991.929941</td>
      <td>1304.110938</td>
      <td>43091.047915</td>
    </tr>
    <tr>
      <th>Ward 17</th>
      <td>66135.0</td>
      <td>14452.375905</td>
      <td>2445.709112</td>
      <td>2475.965307</td>
      <td>2803.740755</td>
      <td>1084.180328</td>
      <td>1603.578345</td>
      <td>474.013725</td>
      <td>635.380099</td>
      <td>408.458635</td>
      <td>816.917270</td>
      <td>534.526115</td>
      <td>373.159741</td>
      <td>791.703774</td>
      <td>51682.624095</td>
    </tr>
    <tr>
      <th>Ward 18</th>
      <td>72620.0</td>
      <td>23274.381719</td>
      <td>4016.924610</td>
      <td>3835.982060</td>
      <td>4409.828433</td>
      <td>2305.725066</td>
      <td>1871.462946</td>
      <td>387.734036</td>
      <td>1664.671460</td>
      <td>336.036164</td>
      <td>547.997437</td>
      <td>387.734036</td>
      <td>2243.687620</td>
      <td>1256.258276</td>
      <td>49350.788069</td>
    </tr>
    <tr>
      <th>Ward 19</th>
      <td>72460.0</td>
      <td>21057.318239</td>
      <td>3123.188019</td>
      <td>7764.663198</td>
      <td>2394.613978</td>
      <td>1197.306989</td>
      <td>1609.995781</td>
      <td>647.055266</td>
      <td>764.238504</td>
      <td>529.872029</td>
      <td>998.604978</td>
      <td>484.017719</td>
      <td>473.827872</td>
      <td>1075.028829</td>
      <td>51402.681761</td>
    </tr>
    <tr>
      <th>Ward 20</th>
      <td>36400.0</td>
      <td>15977.921542</td>
      <td>3281.761872</td>
      <td>5135.581555</td>
      <td>2059.242946</td>
      <td>691.424639</td>
      <td>946.951136</td>
      <td>761.569167</td>
      <td>440.908465</td>
      <td>856.765313</td>
      <td>576.187199</td>
      <td>250.516173</td>
      <td>270.557467</td>
      <td>711.465933</td>
      <td>20422.078458</td>
    </tr>
    <tr>
      <th>Ward 21</th>
      <td>28665.0</td>
      <td>11310.245592</td>
      <td>1763.841310</td>
      <td>2439.464736</td>
      <td>3218.236776</td>
      <td>732.355164</td>
      <td>593.104534</td>
      <td>371.335013</td>
      <td>376.492443</td>
      <td>443.539043</td>
      <td>293.973552</td>
      <td>226.926952</td>
      <td>304.288413</td>
      <td>541.530227</td>
      <td>17354.754408</td>
    </tr>
    <tr>
      <th>Ward 22</th>
      <td>42230.0</td>
      <td>22242.500000</td>
      <td>5032.750000</td>
      <td>8061.625000</td>
      <td>1870.625000</td>
      <td>758.500000</td>
      <td>773.875000</td>
      <td>1768.125000</td>
      <td>410.000000</td>
      <td>753.375000</td>
      <td>1240.250000</td>
      <td>471.500000</td>
      <td>292.125000</td>
      <td>804.625000</td>
      <td>19987.500000</td>
    </tr>
    <tr>
      <th>Ward 23</th>
      <td>47560.0</td>
      <td>26689.101558</td>
      <td>7962.581501</td>
      <td>3500.382363</td>
      <td>5187.503592</td>
      <td>3941.872030</td>
      <td>1350.748149</td>
      <td>904.002652</td>
      <td>961.816775</td>
      <td>688.513648</td>
      <td>567.629572</td>
      <td>194.465687</td>
      <td>583.397060</td>
      <td>856.700188</td>
      <td>20870.898442</td>
    </tr>
    <tr>
      <th>Ward 24</th>
      <td>42390.0</td>
      <td>17966.199095</td>
      <td>1939.411765</td>
      <td>8674.072398</td>
      <td>1827.522624</td>
      <td>836.504525</td>
      <td>724.615385</td>
      <td>495.509050</td>
      <td>825.848416</td>
      <td>404.932127</td>
      <td>793.880090</td>
      <td>538.133484</td>
      <td>239.762443</td>
      <td>676.662896</td>
      <td>24418.472851</td>
    </tr>
    <tr>
      <th>Ward 25</th>
      <td>43945.0</td>
      <td>18742.302280</td>
      <td>3271.086299</td>
      <td>7380.388462</td>
      <td>1252.212724</td>
      <td>822.882647</td>
      <td>914.881949</td>
      <td>935.326239</td>
      <td>444.663294</td>
      <td>960.881600</td>
      <td>1482.210979</td>
      <td>378.219353</td>
      <td>255.553617</td>
      <td>643.995115</td>
      <td>25197.586648</td>
    </tr>
    <tr>
      <th>Ward 26</th>
      <td>57700.0</td>
      <td>14157.182198</td>
      <td>2988.282846</td>
      <td>3024.162743</td>
      <td>1527.458470</td>
      <td>1250.670694</td>
      <td>1086.648308</td>
      <td>507.444257</td>
      <td>246.033579</td>
      <td>1127.653904</td>
      <td>994.385716</td>
      <td>553.575553</td>
      <td>235.782180</td>
      <td>615.083948</td>
      <td>43542.817802</td>
    </tr>
    <tr>
      <th>Ward 27</th>
      <td>59675.0</td>
      <td>22609.876231</td>
      <td>3009.625747</td>
      <td>8998.730740</td>
      <td>1683.179675</td>
      <td>1512.349499</td>
      <td>1024.981056</td>
      <td>547.661446</td>
      <td>251.220847</td>
      <td>2436.842216</td>
      <td>1748.497095</td>
      <td>401.953355</td>
      <td>256.245264</td>
      <td>733.564873</td>
      <td>37065.123769</td>
    </tr>
    <tr>
      <th>Ward 28</th>
      <td>55840.0</td>
      <td>37191.280101</td>
      <td>3649.871447</td>
      <td>15130.284266</td>
      <td>899.829803</td>
      <td>1193.032772</td>
      <td>616.737280</td>
      <td>1162.701430</td>
      <td>429.694007</td>
      <td>5995.495202</td>
      <td>6465.630998</td>
      <td>717.841753</td>
      <td>146.601485</td>
      <td>783.559660</td>
      <td>18648.719899</td>
    </tr>
    <tr>
      <th>Ward 29</th>
      <td>57765.0</td>
      <td>39831.305908</td>
      <td>3321.803501</td>
      <td>14874.803501</td>
      <td>1319.620569</td>
      <td>4105.486214</td>
      <td>1046.595624</td>
      <td>773.570678</td>
      <td>470.209628</td>
      <td>6684.055142</td>
      <td>5708.243764</td>
      <td>333.697155</td>
      <td>232.576805</td>
      <td>950.531291</td>
      <td>17928.638074</td>
    </tr>
    <tr>
      <th>Ward 30</th>
      <td>48580.0</td>
      <td>33923.643784</td>
      <td>3395.922980</td>
      <td>17904.851402</td>
      <td>1601.370866</td>
      <td>940.487652</td>
      <td>716.804102</td>
      <td>665.966932</td>
      <td>391.446212</td>
      <td>4041.555044</td>
      <td>2984.141900</td>
      <td>305.023022</td>
      <td>167.762662</td>
      <td>803.227292</td>
      <td>14656.356216</td>
    </tr>
    <tr>
      <th>Ward 31</th>
      <td>61490.0</td>
      <td>43527.192982</td>
      <td>7802.280702</td>
      <td>16557.894737</td>
      <td>3171.087719</td>
      <td>4320.105263</td>
      <td>1144.000000</td>
      <td>2117.403509</td>
      <td>501.754386</td>
      <td>4320.105263</td>
      <td>1615.649123</td>
      <td>275.964912</td>
      <td>446.561404</td>
      <td>1244.350877</td>
      <td>17957.789474</td>
    </tr>
    <tr>
      <th>Ward 32</th>
      <td>68245.0</td>
      <td>35022.395067</td>
      <td>7128.182899</td>
      <td>5896.213877</td>
      <td>6448.825496</td>
      <td>4365.124805</td>
      <td>1738.952158</td>
      <td>2960.781517</td>
      <td>344.748533</td>
      <td>2631.242478</td>
      <td>1084.943912</td>
      <td>471.494317</td>
      <td>765.544536</td>
      <td>1176.200877</td>
      <td>33227.674764</td>
    </tr>
    <tr>
      <th>Ward 33</th>
      <td>55425.0</td>
      <td>33854.765174</td>
      <td>16237.297446</td>
      <td>2257.999176</td>
      <td>3318.497665</td>
      <td>3739.652568</td>
      <td>750.975007</td>
      <td>1070.646800</td>
      <td>421.154902</td>
      <td>3993.360341</td>
      <td>492.193079</td>
      <td>142.076353</td>
      <td>461.748146</td>
      <td>964.089536</td>
      <td>21565.160670</td>
    </tr>
    <tr>
      <th>Ward 34</th>
      <td>58220.0</td>
      <td>13911.595002</td>
      <td>2899.712193</td>
      <td>3622.131840</td>
      <td>1861.233951</td>
      <td>1525.108143</td>
      <td>802.688496</td>
      <td>331.109005</td>
      <td>456.529082</td>
      <td>481.613098</td>
      <td>406.361051</td>
      <td>561.881947</td>
      <td>311.041792</td>
      <td>647.167600</td>
      <td>44308.404998</td>
    </tr>
    <tr>
      <th>Ward 35</th>
      <td>65240.0</td>
      <td>30686.288020</td>
      <td>12376.769088</td>
      <td>3877.548107</td>
      <td>5355.673495</td>
      <td>3047.368094</td>
      <td>1113.656114</td>
      <td>556.828057</td>
      <td>485.959032</td>
      <td>1300.952824</td>
      <td>516.331471</td>
      <td>410.027933</td>
      <td>632.759156</td>
      <td>1002.290503</td>
      <td>34553.711980</td>
    </tr>
    <tr>
      <th>Ward 36</th>
      <td>60615.0</td>
      <td>22461.344113</td>
      <td>3098.644517</td>
      <td>10128.024255</td>
      <td>3481.508338</td>
      <td>1010.760485</td>
      <td>689.154876</td>
      <td>290.976503</td>
      <td>1036.284740</td>
      <td>377.758969</td>
      <td>296.081354</td>
      <td>479.855988</td>
      <td>398.178373</td>
      <td>1169.010864</td>
      <td>38153.655887</td>
    </tr>
    <tr>
      <th>Ward 37</th>
      <td>54020.0</td>
      <td>12636.434239</td>
      <td>2833.869131</td>
      <td>2884.293849</td>
      <td>2430.471390</td>
      <td>1134.556147</td>
      <td>620.224027</td>
      <td>287.420891</td>
      <td>327.760665</td>
      <td>236.996173</td>
      <td>347.930552</td>
      <td>363.057967</td>
      <td>398.355269</td>
      <td>766.455708</td>
      <td>41383.565761</td>
    </tr>
    <tr>
      <th>Ward 38</th>
      <td>64865.0</td>
      <td>27787.625246</td>
      <td>10957.925285</td>
      <td>2683.365317</td>
      <td>5948.296500</td>
      <td>3096.583169</td>
      <td>775.421156</td>
      <td>357.101848</td>
      <td>464.232403</td>
      <td>897.856076</td>
      <td>153.043649</td>
      <td>403.014943</td>
      <td>851.942981</td>
      <td>1198.841919</td>
      <td>37072.273299</td>
    </tr>
    <tr>
      <th>Ward 39</th>
      <td>65460.0</td>
      <td>44999.934722</td>
      <td>17295.927883</td>
      <td>4262.937519</td>
      <td>8866.706559</td>
      <td>7956.126826</td>
      <td>920.753808</td>
      <td>529.051912</td>
      <td>707.098228</td>
      <td>1108.974200</td>
      <td>234.003730</td>
      <td>325.570407</td>
      <td>1383.674231</td>
      <td>1409.109419</td>
      <td>20465.152316</td>
    </tr>
    <tr>
      <th>Ward 40</th>
      <td>67795.0</td>
      <td>45218.641260</td>
      <td>16404.878824</td>
      <td>5096.415214</td>
      <td>5841.861022</td>
      <td>9143.121026</td>
      <td>1146.059541</td>
      <td>2246.479542</td>
      <td>608.527190</td>
      <td>1475.678435</td>
      <td>223.126636</td>
      <td>197.771337</td>
      <td>1460.465255</td>
      <td>1369.186177</td>
      <td>22571.287680</td>
    </tr>
    <tr>
      <th>Ward 41</th>
      <td>70535.0</td>
      <td>52696.741447</td>
      <td>21371.143810</td>
      <td>8435.977820</td>
      <td>7392.984198</td>
      <td>7280.504494</td>
      <td>1155.473326</td>
      <td>756.681647</td>
      <td>557.285807</td>
      <td>2014.409249</td>
      <td>393.678965</td>
      <td>199.395839</td>
      <td>1528.701435</td>
      <td>1620.730284</td>
      <td>17833.145839</td>
    </tr>
    <tr>
      <th>Ward 42</th>
      <td>61245.0</td>
      <td>48154.272810</td>
      <td>9503.534483</td>
      <td>24493.958093</td>
      <td>4476.412308</td>
      <td>3728.659462</td>
      <td>651.757548</td>
      <td>1076.157812</td>
      <td>363.771655</td>
      <td>1141.838805</td>
      <td>419.347880</td>
      <td>242.514437</td>
      <td>732.595694</td>
      <td>1328.777017</td>
      <td>13090.727190</td>
    </tr>
    <tr>
      <th>Ward 43</th>
      <td>69375.0</td>
      <td>59607.382366</td>
      <td>8018.497142</td>
      <td>40534.850484</td>
      <td>3249.093008</td>
      <td>2679.611917</td>
      <td>396.602902</td>
      <td>1418.618074</td>
      <td>477.957344</td>
      <td>559.311785</td>
      <td>320.333113</td>
      <td>193.216799</td>
      <td>538.973175</td>
      <td>1220.316623</td>
      <td>9767.617634</td>
    </tr>
    <tr>
      <th>Ward 44</th>
      <td>62360.0</td>
      <td>57302.827021</td>
      <td>15935.152056</td>
      <td>27121.618685</td>
      <td>5304.974455</td>
      <td>4389.626145</td>
      <td>490.545779</td>
      <td>561.346201</td>
      <td>520.888817</td>
      <td>414.688184</td>
      <td>116.314979</td>
      <td>96.086287</td>
      <td>885.005271</td>
      <td>1471.637337</td>
      <td>5052.115806</td>
    </tr>
    <tr>
      <th>Ward 45</th>
      <td>63585.0</td>
      <td>57336.241627</td>
      <td>28998.849003</td>
      <td>2876.333044</td>
      <td>11430.166680</td>
      <td>6734.828592</td>
      <td>891.963906</td>
      <td>526.158484</td>
      <td>360.794389</td>
      <td>861.897707</td>
      <td>75.165498</td>
      <td>45.099299</td>
      <td>2450.395224</td>
      <td>2084.589802</td>
      <td>6248.758373</td>
    </tr>
    <tr>
      <th>Ward 46</th>
      <td>57635.0</td>
      <td>43308.282824</td>
      <td>20591.500832</td>
      <td>1953.643251</td>
      <td>9778.312604</td>
      <td>4674.608917</td>
      <td>954.104844</td>
      <td>605.780853</td>
      <td>530.058246</td>
      <td>1211.561706</td>
      <td>146.397040</td>
      <td>146.397040</td>
      <td>1554.837523</td>
      <td>1161.079968</td>
      <td>14321.669002</td>
    </tr>
    <tr>
      <th>Ward 47</th>
      <td>49230.0</td>
      <td>27500.163479</td>
      <td>11231.890808</td>
      <td>2475.166564</td>
      <td>5836.128933</td>
      <td>3315.407156</td>
      <td>779.500308</td>
      <td>339.133251</td>
      <td>283.454658</td>
      <td>587.156076</td>
      <td>253.084516</td>
      <td>222.714374</td>
      <td>1184.435534</td>
      <td>987.029611</td>
      <td>21729.836521</td>
    </tr>
  </tbody>
</table>
</div>

<h1 id="language">Language</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lang_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Language/language_before.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">lang_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Language/language_after.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lang_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>english</th>
      <th>non_english</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>2557220</td>
      <td>134445</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>60040</td>
      <td>56105</td>
      <td>3940</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>56300</td>
      <td>54115</td>
      <td>2180</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>63165</td>
      <td>61410</td>
      <td>1755</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>65330</td>
      <td>63855</td>
      <td>1475</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lang_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>english</th>
      <th>non_english</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>2557220</td>
      <td>134445</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>116960</td>
      <td>110765</td>
      <td>6185</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>116055</td>
      <td>113025</td>
      <td>3030</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>127520</td>
      <td>124255</td>
      <td>3265</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>106445</td>
      <td>103735</td>
      <td>2710</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lang_before</span><span class="p">,</span> <span class="n">lang_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">lang_before</span><span class="p">,</span> <span class="n">lang_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lang_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>english</th>
      <th>non_english</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>56754.449950</td>
      <td>3985.607928</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>54989.682948</td>
      <td>2215.236234</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>62284.994063</td>
      <td>1780.005937</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>64568.518292</td>
      <td>1491.481708</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>48145.847786</td>
      <td>1384.256274</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">total_before</span> <span class="o">=</span> <span class="n">lang_before</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_before</span> <span class="o">=</span> <span class="n">lang_before</span><span class="o">.</span><span class="n">non_english</span>
<span class="n">majority_before</span> <span class="o">=</span> <span class="n">lang_before</span><span class="o">.</span><span class="n">english</span>

<span class="n">total_after</span> <span class="o">=</span> <span class="n">lang_after</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_after</span> <span class="o">=</span> <span class="n">lang_after</span><span class="o">.</span><span class="n">non_english</span>
<span class="n">majority_after</span> <span class="o">=</span> <span class="n">lang_after</span><span class="o">.</span><span class="n">english</span>

<span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"If you are english speaking, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"If you are not english speaking, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">majority_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"This is a disparity of {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="o">-</span><span class="n">majority_increase</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If you are english speaking, your ward size increased by 47397 people on average
If you are not english speaking, your ward size increased by 50187 people on average
This is a disparity of -2790 people on average
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lost majorities
</span><span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span> <span class="o">/</span> <span class="n">total_before</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority not english speaking before: {}/47"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])))</span>

<span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span> <span class="o">/</span> <span class="n">total_after</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority not english speaking before: {}/25"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Wards with majority not english speaking before: 0/47
Wards with majority not english speaking before: 0/25
</code></pre></div></div>

<h1 id="first-generation-immigrants">First generation immigrants</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">immigrant_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Immigration/immigration_before.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">immigrant_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Immigration/immigration_after.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">immigrant_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>first_gen</th>
      <th>second_gen_plus</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>1377465</td>
      <td>1314205</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>60040</td>
      <td>39450</td>
      <td>20585</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>56295</td>
      <td>30490</td>
      <td>25810</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>63165</td>
      <td>28290</td>
      <td>34870</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>65335</td>
      <td>26895</td>
      <td>38440</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">immigrant_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>first_gen</th>
      <th>second_gen_plus</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2691665</td>
      <td>1377465</td>
      <td>1314205</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>116960</td>
      <td>71535</td>
      <td>45425</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>116055</td>
      <td>50030</td>
      <td>66025</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>127525</td>
      <td>51980</td>
      <td>75545</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>106445</td>
      <td>37785</td>
      <td>68650</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">immigrant_before</span><span class="p">,</span> <span class="n">immigrant_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">immigrant_before</span><span class="p">,</span> <span class="n">immigrant_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">immigrant_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>first_gen</th>
      <th>second_gen_plus</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>39906.658061</td>
      <td>20823.284061</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>30985.574207</td>
      <td>26229.507061</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>28693.087153</td>
      <td>35366.841605</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>27193.444555</td>
      <td>38866.555445</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>21839.926546</td>
      <td>27685.125485</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">total_before</span> <span class="o">=</span> <span class="n">immigrant_before</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_before</span> <span class="o">=</span> <span class="n">immigrant_before</span><span class="o">.</span><span class="n">first_gen</span>
<span class="n">majority_before</span> <span class="o">=</span> <span class="n">immigrant_before</span><span class="o">.</span><span class="n">second_gen_plus</span>

<span class="n">total_after</span> <span class="o">=</span> <span class="n">immigrant_after</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_after</span> <span class="o">=</span> <span class="n">immigrant_after</span><span class="o">.</span><span class="n">first_gen</span>
<span class="n">majority_after</span> <span class="o">=</span> <span class="n">immigrant_after</span><span class="o">.</span><span class="n">second_gen_plus</span>

<span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"If you are first gen canadian, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"If you are not first gen canadian, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">majority_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"This is a disparity of {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="o">-</span><span class="n">majority_increase</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If you are first gen canadian, your ward size increased by 49799 people on average
If you are not first gen canadian, your ward size increased by 50308 people on average
This is a disparity of -509 people on average
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lost majorities
</span><span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span> <span class="o">/</span> <span class="n">total_before</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority first gen canadian before: {}/47={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">47</span><span class="p">))</span>

<span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span> <span class="o">/</span> <span class="n">total_after</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority first gen canadian after: {}/25={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">25</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Wards with majority first gen canadian before: 27/47=0.574468085106383
Wards with majority first gen canadian after: 12/25=0.48
</code></pre></div></div>

<h1 id="education">Education</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">education_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Education/education_before.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">education_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Education/education_after.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">education_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>post_secondary</th>
      <th>no_post_secondary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2294785</td>
      <td>1356355</td>
      <td>938435</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>48650</td>
      <td>20630</td>
      <td>28020</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>46555</td>
      <td>21875</td>
      <td>24680</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>53825</td>
      <td>32465</td>
      <td>21365</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>55085</td>
      <td>33430</td>
      <td>21660</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">education_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>post_secondary</th>
      <th>no_post_secondary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>2294790</td>
      <td>1356355</td>
      <td>938430</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>95295</td>
      <td>42350</td>
      <td>52940</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>98790</td>
      <td>58480</td>
      <td>40305</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>110720</td>
      <td>71165</td>
      <td>39555</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>90620</td>
      <td>62430</td>
      <td>28195</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">education_before</span><span class="p">,</span> <span class="n">education_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">education_before</span><span class="p">,</span> <span class="n">education_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">education_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>post_secondary</th>
      <th>no_post_secondary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>25754.636177</td>
      <td>34980.363823</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>26881.511116</td>
      <td>30328.488884</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>38641.341849</td>
      <td>25429.609382</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>40090.511028</td>
      <td>25975.485159</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>32661.128497</td>
      <td>16864.741584</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">total_before</span> <span class="o">=</span> <span class="n">education_before</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_before</span> <span class="o">=</span> <span class="n">education_before</span><span class="o">.</span><span class="n">no_post_secondary</span>
<span class="n">majority_before</span> <span class="o">=</span> <span class="n">education_before</span><span class="o">.</span><span class="n">post_secondary</span>

<span class="n">total_after</span> <span class="o">=</span> <span class="n">education_after</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_after</span> <span class="o">=</span> <span class="n">education_after</span><span class="o">.</span><span class="n">no_post_secondary</span>
<span class="n">majority_after</span> <span class="o">=</span> <span class="n">education_after</span><span class="o">.</span><span class="n">post_secondary</span>

<span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"If you don't have a post-secondary degree, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"If you have a post-secondary degree, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">majority_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"This is a disparity of {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="o">-</span><span class="n">majority_increase</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If you don't have a post-secondary degree, your ward size increased by 49261 people on average
If you have a post-secondary degree, your ward size increased by 50598 people on average
This is a disparity of -1337 people on average
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lost majorities
</span><span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span> <span class="o">/</span> <span class="n">total_before</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority no post-secondary degree before: {}/47={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">47</span><span class="p">))</span>

<span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span> <span class="o">/</span> <span class="n">total_after</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority no post-secondary degree after: {}/25={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">25</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Wards with majority no post-secondary degree before: 13/47=0.2765957446808511
Wards with majority no post-secondary degree after: 5/25=0.2
</code></pre></div></div>

<h1 id="renter-vs-home-owner">Renter vs. Home Owner</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">housing_before</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Housing/home_before.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">housing_after</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'./Data/Housing/home_after.csv'</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">housing_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>own</th>
      <th>rent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>1112905</td>
      <td>587080</td>
      <td>525825</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>18305</td>
      <td>9925</td>
      <td>8385</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>19465</td>
      <td>11705</td>
      <td>7765</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>24530</td>
      <td>17615</td>
      <td>6915</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>25675</td>
      <td>15700</td>
      <td>9975</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">housing_after</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>own</th>
      <th>rent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Toronto</th>
      <td>1112905</td>
      <td>587080</td>
      <td>525825</td>
    </tr>
    <tr>
      <th>Ward 1</th>
      <td>37895</td>
      <td>20945</td>
      <td>16945</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>45045</td>
      <td>30175</td>
      <td>14870</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>59730</td>
      <td>33860</td>
      <td>25870</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>50315</td>
      <td>21375</td>
      <td>28945</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">housing_before</span><span class="p">,</span> <span class="n">housing_after</span> <span class="o">=</span> <span class="n">scale_populations</span><span class="p">(</span><span class="n">housing_before</span><span class="p">,</span> <span class="n">housing_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">housing_before</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total</th>
      <th>own</th>
      <th>rent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ward 1</th>
      <td>60735.0</td>
      <td>32930.613220</td>
      <td>27820.976509</td>
    </tr>
    <tr>
      <th>Ward 2</th>
      <td>57210.0</td>
      <td>34402.417159</td>
      <td>22822.278448</td>
    </tr>
    <tr>
      <th>Ward 3</th>
      <td>64065.0</td>
      <td>46005.094782</td>
      <td>18059.905218</td>
    </tr>
    <tr>
      <th>Ward 4</th>
      <td>66060.0</td>
      <td>40395.014606</td>
      <td>25664.985394</td>
    </tr>
    <tr>
      <th>Ward 5</th>
      <td>49520.0</td>
      <td>28338.746890</td>
      <td>21192.454196</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Initialize params
</span><span class="n">total_before</span> <span class="o">=</span> <span class="n">housing_before</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_before</span> <span class="o">=</span> <span class="n">housing_before</span><span class="o">.</span><span class="n">rent</span>
<span class="n">majority_before</span> <span class="o">=</span> <span class="n">housing_before</span><span class="o">.</span><span class="n">own</span>

<span class="n">total_after</span> <span class="o">=</span> <span class="n">housing_after</span><span class="o">.</span><span class="n">total</span>
<span class="n">protected_after</span> <span class="o">=</span> <span class="n">housing_after</span><span class="o">.</span><span class="n">rent</span>
<span class="n">majority_after</span> <span class="o">=</span> <span class="n">housing_after</span><span class="o">.</span><span class="n">own</span>

<span class="n">protected_increase</span><span class="p">,</span> <span class="n">majority_increase</span> <span class="o">=</span> <span class="n">get_increases</span><span class="p">(</span><span class="n">total_before</span><span class="p">,</span> <span class="n">protected_before</span><span class="p">,</span> <span class="n">majority_before</span><span class="p">,</span> <span class="n">total_after</span><span class="p">,</span> <span class="n">protected_after</span><span class="p">,</span> <span class="n">majority_after</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"If you rent, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"If you own your home, your ward size increased by {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">majority_increase</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"This is a disparity of {} people on average"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">protected_increase</span><span class="o">-</span><span class="n">majority_increase</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If you rent, your ward size increased by 50615 people on average
If you own your home, your ward size increased by 49567 people on average
This is a disparity of 1048 people on average
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lost majorities
</span><span class="n">prop_protected_before</span> <span class="o">=</span> <span class="n">protected_before</span> <span class="o">/</span> <span class="n">total_before</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority renters before: {}/47={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_before</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">47</span><span class="p">))</span>

<span class="n">prop_protected_after</span> <span class="o">=</span> <span class="n">protected_after</span> <span class="o">/</span> <span class="n">total_after</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wards with majority renters after: {}/25={}"</span>
      <span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">]),</span>
             <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prop_protected_after</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">])</span><span class="o">/</span><span class="mi">25</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Wards with majority renters before: 17/47=0.3617021276595745
Wards with majority renters after: 9/25=0.36
</code></pre></div></div>

  </div>

  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="joshfeldman.net/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
